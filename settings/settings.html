<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>n8n Co Pilot</title>
  <link rel="stylesheet" href="settings.css">
</head>
<body>
  <div class="ai-shimmer"></div>
  <div class="container">
    <h1>n8n Co Pilot</h1>
    <p>AI-powered assistant for building n8n workflows efficiently.</p>
    
    <div class="status-container">
      <div id="status-indicator" class="status-indicator"></div>
      <span id="status-text">Checking status...</span>
    </div>
    
    <div class="buttons">
      <button id="show-chat">Show AI Assistant</button>
      <button id="settings-btn">⚙️</button>
    </div>
    
    <div id="settings-panel" class="settings-panel hidden">
      <h2>AI Provider</h2>
      
      <div class="provider-select">
        <label for="provider-select">Select Provider:</label>
        <select id="provider-select">
          <option value="openai">OpenAI</option>
          <option value="anthropic">Anthropic</option>
          <option value="ollama">Ollama</option>
          <option value="lmstudio">LM Studio</option>
        </select>
      </div>

      <div id="model-select-container" class="setting">
        <label for="model-select">Model:</label>
        <select id="model-select" disabled>
          <option value="">Loading models...</option>
        </select>
      </div>
      
      <div id="openai-section" class="api-section">
        <div class="setting">
          <label for="openai-key">OpenAI API Key:</label>
          <input type="password" id="openai-key" placeholder="sk-..." autocomplete="off">
        </div>
      </div>
      
      <div id="anthropic-section" class="api-section hidden">
        <div class="setting">
          <label for="anthropic-key">Anthropic API Key:</label>
          <input type="password" id="anthropic-key" placeholder="sk-ant-..." autocomplete="off">
        </div>
      </div>

      <div id="ollama-section" class="api-section hidden">
        <div class="setting">
          <label for="ollama-url">Ollama URL:</label>
          <input type="text" id="ollama-url" value="http://localhost:11434" placeholder="http://localhost:11434">
        </div>
      </div>

      <div id="lmstudio-section" class="api-section hidden">
        <div class="setting">
          <label for="lmstudio-url">LM Studio URL:</label>
          <input type="text" id="lmstudio-url" value="http://localhost:1234" placeholder="http://localhost:1234">
          <p class="helper-text-small">Ensure your LM Studio server allows requests (CORS) from this Chrome extension. You may need to adjust this in LM Studio's server settings.</p>
        </div>
      </div>
      
      <h2>n8n Integration</h2>
      <div class="api-section">
        <div class="setting">
          <label for="n8n-api-url">n8n API URL:</label>
          <input type="text" id="n8n-api-url" placeholder="https://your-n8n-instance.com" autocomplete="off">
        </div>
        <div class="setting">
          <label for="n8n-api-key">n8n API Key:</label>
          <input type="password" id="n8n-api-key" placeholder="n8n_api_..." autocomplete="off">
        </div>
        <div class="setting"> <!-- Added a div for better layout -->
          <button id="test-n8n-connection" type="button" class="settings-button">Test Connection</button>
          <span id="n8n-connection-status" class="connection-status-text"></span>
        </div>
        <div class="helper-text">
          <small>Required to apply workflow components directly to your canvas</small>
        </div>
      </div>
      
      <button id="save-settings">Save Settings</button>
    </div>
    
    <div class="footer">
      <p>v1.0.0 • Powered by AI</p>
    </div>
  </div>
  <script src="settings.js"></script>
</body>
</html>